{"ast":null,"code":"import Stats from '../libs/stats.module.js';\n\n// https://www.khronos.org/registry/webgl/extensions/EXT_disjoint_timer_query/\n// https://www.khronos.org/registry/webgl/extensions/EXT_disjoint_timer_query_webgl2/\nexport class GPUStatsPanel extends Stats.Panel {\n  constructor(context, name = 'GPU MS') {\n    super(name, '#f90', '#210');\n    let isWebGL2 = true;\n    let extension = context.getExtension('EXT_disjoint_timer_query_webgl2');\n    if (extension === null) {\n      isWebGL2 = false;\n      extension = context.getExtension('EXT_disjoint_timer_query');\n      if (extension === null) {\n        console.warn('GPUStatsPanel: disjoint_time_query extension not available.');\n      }\n    }\n    this.context = context;\n    this.extension = extension;\n    this.maxTime = 30;\n    this.activeQueries = 0;\n    this.startQuery = function () {\n      const gl = this.context;\n      const ext = this.extension;\n      if (ext === null) {\n        return;\n      }\n\n      // create the query object\n      let query;\n      if (isWebGL2) {\n        query = gl.createQuery();\n        gl.beginQuery(ext.TIME_ELAPSED_EXT, query);\n      } else {\n        query = ext.createQueryEXT();\n        ext.beginQueryEXT(ext.TIME_ELAPSED_EXT, query);\n      }\n      this.activeQueries++;\n      const checkQuery = () => {\n        // check if the query is available and valid\n        let available, disjoint, ns;\n        if (isWebGL2) {\n          available = gl.getQueryParameter(query, gl.QUERY_RESULT_AVAILABLE);\n          disjoint = gl.getParameter(ext.GPU_DISJOINT_EXT);\n          ns = gl.getQueryParameter(query, gl.QUERY_RESULT);\n        } else {\n          available = ext.getQueryObjectEXT(query, ext.QUERY_RESULT_AVAILABLE_EXT);\n          disjoint = gl.getParameter(ext.GPU_DISJOINT_EXT);\n          ns = ext.getQueryObjectEXT(query, ext.QUERY_RESULT_EXT);\n        }\n        const ms = ns * 1e-6;\n        if (available) {\n          // update the display if it is valid\n          if (!disjoint) {\n            this.update(ms, this.maxTime);\n          }\n          this.activeQueries--;\n        } else if (gl.isContextLost() === false) {\n          // otherwise try again the next frame\n          requestAnimationFrame(checkQuery);\n        }\n      };\n      requestAnimationFrame(checkQuery);\n    };\n    this.endQuery = function () {\n      // finish the query measurement\n      const ext = this.extension;\n      const gl = this.context;\n      if (ext === null) {\n        return;\n      }\n      if (isWebGL2) {\n        gl.endQuery(ext.TIME_ELAPSED_EXT);\n      } else {\n        ext.endQueryEXT(ext.TIME_ELAPSED_EXT);\n      }\n    };\n  }\n}","map":{"version":3,"names":["Stats","GPUStatsPanel","Panel","constructor","context","name","isWebGL2","extension","getExtension","console","warn","maxTime","activeQueries","startQuery","gl","ext","query","createQuery","beginQuery","TIME_ELAPSED_EXT","createQueryEXT","beginQueryEXT","checkQuery","available","disjoint","ns","getQueryParameter","QUERY_RESULT_AVAILABLE","getParameter","GPU_DISJOINT_EXT","QUERY_RESULT","getQueryObjectEXT","QUERY_RESULT_AVAILABLE_EXT","QUERY_RESULT_EXT","ms","update","isContextLost","requestAnimationFrame","endQuery","endQueryEXT"],"sources":["/home/ervin/Escritorio/integrador/Projecto-Integrador-1-Game/node_modules/three/examples/jsm/utils/GPUStatsPanel.js"],"sourcesContent":["import Stats from '../libs/stats.module.js';\n\n// https://www.khronos.org/registry/webgl/extensions/EXT_disjoint_timer_query/\n// https://www.khronos.org/registry/webgl/extensions/EXT_disjoint_timer_query_webgl2/\nexport class GPUStatsPanel extends Stats.Panel {\n\n\tconstructor( context, name = 'GPU MS' ) {\n\n\t\tsuper( name, '#f90', '#210' );\n\n\t\tlet isWebGL2 = true;\n\t\tlet extension = context.getExtension( 'EXT_disjoint_timer_query_webgl2' );\n\t\tif ( extension === null ) {\n\n\t\t\tisWebGL2 = false;\n\t\t\textension = context.getExtension( 'EXT_disjoint_timer_query' );\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'GPUStatsPanel: disjoint_time_query extension not available.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.context = context;\n\t\tthis.extension = extension;\n\t\tthis.maxTime = 30;\n\t\tthis.activeQueries = 0;\n\n\t\tthis.startQuery = function () {\n\n\t\t\tconst gl = this.context;\n\t\t\tconst ext = this.extension;\n\n\t\t\tif ( ext === null ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t// create the query object\n\t\t\tlet query;\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tquery = gl.createQuery();\n\t\t\t\tgl.beginQuery( ext.TIME_ELAPSED_EXT, query );\n\n\t\t\t} else {\n\n\t\t\t\tquery = ext.createQueryEXT();\n\t\t\t\text.beginQueryEXT( ext.TIME_ELAPSED_EXT, query );\n\n\t\t\t}\n\n\t\t\tthis.activeQueries ++;\n\n\t\t\tconst checkQuery = () => {\n\n\t\t\t\t// check if the query is available and valid\n\t\t\t\tlet available, disjoint, ns;\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\tavailable = gl.getQueryParameter( query, gl.QUERY_RESULT_AVAILABLE );\n\t\t\t\t\tdisjoint = gl.getParameter( ext.GPU_DISJOINT_EXT );\n\t\t\t\t\tns = gl.getQueryParameter( query, gl.QUERY_RESULT );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tavailable = ext.getQueryObjectEXT( query, ext.QUERY_RESULT_AVAILABLE_EXT );\n\t\t\t\t\tdisjoint = gl.getParameter( ext.GPU_DISJOINT_EXT );\n\t\t\t\t\tns = ext.getQueryObjectEXT( query, ext.QUERY_RESULT_EXT );\n\n\t\t\t\t}\n\n\t\t\t\tconst ms = ns * 1e-6;\n\t\t\t\tif ( available ) {\n\n\t\t\t\t\t// update the display if it is valid\n\t\t\t\t\tif ( ! disjoint ) {\n\n\t\t\t\t\t\tthis.update( ms, this.maxTime );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.activeQueries --;\n\n\n\t\t\t\t} else if ( gl.isContextLost() === false ) {\n\n\t\t\t\t\t// otherwise try again the next frame\n\t\t\t\t\trequestAnimationFrame( checkQuery );\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\trequestAnimationFrame( checkQuery );\n\n\t\t};\n\n\t\tthis.endQuery = function () {\n\n\t\t\t// finish the query measurement\n\t\t\tconst ext = this.extension;\n\t\t\tconst gl = this.context;\n\n\t\t\tif ( ext === null ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tgl.endQuery( ext.TIME_ELAPSED_EXT );\n\n\t\t\t} else {\n\n\t\t\t\text.endQueryEXT( ext.TIME_ELAPSED_EXT );\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}